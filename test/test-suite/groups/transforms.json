[
    {
        "expr": "$ ~> |Account.Order.Product|{\"Total\":Price*Quantity},[\"Description\", \"SKU\"]|",
        "dataset": 7,
        "result": {
            "Account": {
                "Account Name": "Firefly",
                "Order": [
                    {
                        "OrderID": "order103",
                        "Product": [
                            {
                                "Product Name": "Bowler Hat",
                                "ProductID": 858383,
                                "Price": 34.45,
                                "Quantity": 2,
                                "Total": 68.9
                            },
                            {
                                "Product Name": "Trilby hat",
                                "ProductID": 858236,
                                "Price": 21.67,
                                "Quantity": 1,
                                "Total": 21.67
                            }
                        ]
                    },
                    {
                        "OrderID": "order104",
                        "Product": [
                            {
                                "Product Name": "Bowler Hat",
                                "ProductID": 858383,
                                "Price": 34.45,
                                "Quantity": 4,
                                "Total": 137.8
                            },
                            {
                                "ProductID": 345664,
                                "Product Name": "Cloak",
                                "Price": 107.99,
                                "Quantity": 1,
                                "Total": 107.99
                            }
                        ]
                    }
                ]
            }
        },
        "bindings": {}
    },
    {
        "expr": "Account.Order ~> |Product|{\"Total\":Price*Quantity},[\"Description\", \"SKU\"]|",
        "dataset": 7,
        "result": [
            {
                "OrderID": "order103",
                "Product": [
                    {
                        "Product Name": "Bowler Hat",
                        "ProductID": 858383,
                        "Price": 34.45,
                        "Quantity": 2,
                        "Total": 68.9
                    },
                    {
                        "Product Name": "Trilby hat",
                        "ProductID": 858236,
                        "Price": 21.67,
                        "Quantity": 1,
                        "Total": 21.67
                    }
                ]
            },
            {
                "OrderID": "order104",
                "Product": [
                    {
                        "Product Name": "Bowler Hat",
                        "ProductID": 858383,
                        "Price": 34.45,
                        "Quantity": 4,
                        "Total": 137.8
                    },
                    {
                        "ProductID": 345664,
                        "Product Name": "Cloak",
                        "Price": 107.99,
                        "Quantity": 1,
                        "Total": 107.99
                    }
                ]
            }
        ],
        "bindings": {}
    },
    {
        "expr": "$ ~> |Account.Order.Product|{\"Total\":Price*Quantity, \"Price\": Price * 1.2}|",
        "dataset": 7,
        "result": {
            "Account": {
                "Account Name": "Firefly",
                "Order": [
                    {
                        "OrderID": "order103",
                        "Product": [
                            {
                                "Product Name": "Bowler Hat",
                                "ProductID": 858383,
                                "SKU": "0406654608",
                                "Description": {
                                    "Colour": "Purple",
                                    "Width": 300,
                                    "Height": 200,
                                    "Depth": 210,
                                    "Weight": 0.75
                                },
                                "Price": 41.34,
                                "Quantity": 2,
                                "Total": 68.9
                            },
                            {
                                "Product Name": "Trilby hat",
                                "ProductID": 858236,
                                "SKU": "0406634348",
                                "Description": {
                                    "Colour": "Orange",
                                    "Width": 300,
                                    "Height": 200,
                                    "Depth": 210,
                                    "Weight": 0.6
                                },
                                "Price": 26.004,
                                "Quantity": 1,
                                "Total": 21.67
                            }
                        ]
                    },
                    {
                        "OrderID": "order104",
                        "Product": [
                            {
                                "Product Name": "Bowler Hat",
                                "ProductID": 858383,
                                "SKU": "040657863",
                                "Description": {
                                    "Colour": "Purple",
                                    "Width": 300,
                                    "Height": 200,
                                    "Depth": 210,
                                    "Weight": 0.75
                                },
                                "Price": 41.34,
                                "Quantity": 4,
                                "Total": 137.8
                            },
                            {
                                "ProductID": 345664,
                                "SKU": "0406654603",
                                "Product Name": "Cloak",
                                "Description": {
                                    "Colour": "Black",
                                    "Width": 30,
                                    "Height": 20,
                                    "Depth": 210,
                                    "Weight": 2
                                },
                                "Price": 129.588,
                                "Quantity": 1,
                                "Total": 107.99
                            }
                        ]
                    }
                ]
            }
        },
        "bindings": {}
    },
    {
        "expr": "$ ~> |Account.Order.Product|{},\"Description\"|",
        "dataset": 7,
        "result": {
            "Account": {
                "Account Name": "Firefly",
                "Order": [
                    {
                        "OrderID": "order103",
                        "Product": [
                            {
                                "Product Name": "Bowler Hat",
                                "ProductID": 858383,
                                "SKU": "0406654608",
                                "Price": 34.45,
                                "Quantity": 2
                            },
                            {
                                "Product Name": "Trilby hat",
                                "ProductID": 858236,
                                "SKU": "0406634348",
                                "Price": 21.67,
                                "Quantity": 1
                            }
                        ]
                    },
                    {
                        "OrderID": "order104",
                        "Product": [
                            {
                                "Product Name": "Bowler Hat",
                                "ProductID": 858383,
                                "SKU": "040657863",
                                "Price": 34.45,
                                "Quantity": 4
                            },
                            {
                                "ProductID": 345664,
                                "SKU": "0406654603",
                                "Product Name": "Cloak",
                                "Price": 107.99,
                                "Quantity": 1
                            }
                        ]
                    }
                ]
            }
        },
        "bindings": {}
    },
    {
        "expr": "$ ~> |Account.Order.Product|nomatch,\"Description\"|",
        "dataset": 7,
        "result": {
            "Account": {
                "Account Name": "Firefly",
                "Order": [
                    {
                        "OrderID": "order103",
                        "Product": [
                            {
                                "Product Name": "Bowler Hat",
                                "ProductID": 858383,
                                "SKU": "0406654608",
                                "Price": 34.45,
                                "Quantity": 2
                            },
                            {
                                "Product Name": "Trilby hat",
                                "ProductID": 858236,
                                "SKU": "0406634348",
                                "Price": 21.67,
                                "Quantity": 1
                            }
                        ]
                    },
                    {
                        "OrderID": "order104",
                        "Product": [
                            {
                                "Product Name": "Bowler Hat",
                                "ProductID": 858383,
                                "SKU": "040657863",
                                "Price": 34.45,
                                "Quantity": 4
                            },
                            {
                                "ProductID": 345664,
                                "SKU": "0406654603",
                                "Product Name": "Cloak",
                                "Price": 107.99,
                                "Quantity": 1
                            }
                        ]
                    }
                ]
            }
        },
        "bindings": {}
    },
    {
        "expr": "$ ~> |(Account.Order.Product)[0]|{\"Description\":\"blah\"}|",
        "dataset": 7,
        "result": {
            "Account": {
                "Account Name": "Firefly",
                "Order": [
                    {
                        "OrderID": "order103",
                        "Product": [
                            {
                                "Product Name": "Bowler Hat",
                                "ProductID": 858383,
                                "SKU": "0406654608",
                                "Description": "blah",
                                "Price": 34.45,
                                "Quantity": 2
                            },
                            {
                                "Product Name": "Trilby hat",
                                "ProductID": 858236,
                                "SKU": "0406634348",
                                "Description": {
                                    "Colour": "Orange",
                                    "Width": 300,
                                    "Height": 200,
                                    "Depth": 210,
                                    "Weight": 0.6
                                },
                                "Price": 21.67,
                                "Quantity": 1
                            }
                        ]
                    },
                    {
                        "OrderID": "order104",
                        "Product": [
                            {
                                "Product Name": "Bowler Hat",
                                "ProductID": 858383,
                                "SKU": "040657863",
                                "Description": {
                                    "Colour": "Purple",
                                    "Width": 300,
                                    "Height": 200,
                                    "Depth": 210,
                                    "Weight": 0.75
                                },
                                "Price": 34.45,
                                "Quantity": 4
                            },
                            {
                                "ProductID": 345664,
                                "SKU": "0406654603",
                                "Product Name": "Cloak",
                                "Description": {
                                    "Colour": "Black",
                                    "Width": 30,
                                    "Height": 20,
                                    "Depth": 210,
                                    "Weight": 2
                                },
                                "Price": 107.99,
                                "Quantity": 1
                            }
                        ]
                    }
                ]
            }
        },
        "bindings": {}
    },
    {
        "expr": "$ ~> |foo.bar|{\"Description\":\"blah\"}|",
        "dataset": 7,
        "result": {
            "Account": {
                "Account Name": "Firefly",
                "Order": [
                    {
                        "OrderID": "order103",
                        "Product": [
                            {
                                "Product Name": "Bowler Hat",
                                "ProductID": 858383,
                                "SKU": "0406654608",
                                "Description": {
                                    "Colour": "Purple",
                                    "Width": 300,
                                    "Height": 200,
                                    "Depth": 210,
                                    "Weight": 0.75
                                },
                                "Price": 34.45,
                                "Quantity": 2
                            },
                            {
                                "Product Name": "Trilby hat",
                                "ProductID": 858236,
                                "SKU": "0406634348",
                                "Description": {
                                    "Colour": "Orange",
                                    "Width": 300,
                                    "Height": 200,
                                    "Depth": 210,
                                    "Weight": 0.6
                                },
                                "Price": 21.67,
                                "Quantity": 1
                            }
                        ]
                    },
                    {
                        "OrderID": "order104",
                        "Product": [
                            {
                                "Product Name": "Bowler Hat",
                                "ProductID": 858383,
                                "SKU": "040657863",
                                "Description": {
                                    "Colour": "Purple",
                                    "Width": 300,
                                    "Height": 200,
                                    "Depth": 210,
                                    "Weight": 0.75
                                },
                                "Price": 34.45,
                                "Quantity": 4
                            },
                            {
                                "ProductID": 345664,
                                "SKU": "0406654603",
                                "Product Name": "Cloak",
                                "Description": {
                                    "Colour": "Black",
                                    "Width": 30,
                                    "Height": 20,
                                    "Depth": 210,
                                    "Weight": 2
                                },
                                "Price": 107.99,
                                "Quantity": 1
                            }
                        ]
                    }
                ]
            }
        },
        "bindings": {}
    },
    {
        "expr": "Account ~> |Order|{\"Product\":\"blah\"},nomatch|",
        "dataset": 7,
        "result": {
            "Account Name": "Firefly",
            "Order": [
                {
                    "OrderID": "order103",
                    "Product": "blah"
                },
                {
                    "OrderID": "order104",
                    "Product": "blah"
                }
            ]
        },
        "bindings": {}
    },
    {
        "expr": "foo ~> |foo.bar|{\"Description\":\"blah\"}|",
        "dataset": 7,
        "undefinedResult": true,
        "bindings": {}
    },
    {
        "expr": "Account ~> |Order|5|",
        "dataset": 7,
        "code": "T2011",
        "bindings": {}
    },
    {
        "expr": "Account ~> |Order|{},5|",
        "dataset": 7,
        "code": "T2012",
        "bindings": {}
    },
    {
        "expr": "Account ~> |Order|{\"Product\":\"blah\"},nomatch|",
        "dataset": 7,
        "result": {
            "Account Name": "Firefly",
            "Order": [
                {
                    "OrderID": "order103",
                    "Product": "blah"
                },
                {
                    "OrderID": "order104",
                    "Product": "blah"
                }
            ]
        },
        "bindings": {}
    },
    {
        "expr": "( $clone := 5; $ ~> |Account.Order.Product|{\"blah\":\"foo\"}| )",
        "dataset": 7,
        "code": "T2013",
        "bindings": {}
    }
]
